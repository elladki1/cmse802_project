<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Python: module eda</title>
</head><body>

<table class="heading">
<tr class="heading-text decor">
<td class="title">&nbsp;<br><strong class="title">eda</strong></td>
<td class="extra"><a href=".">index</a><br><a href="file:/mnt/ffs24/home/elladki1/CMSE802/Final_Project/cmse802_project/src/eda.py">/mnt/ffs24/home/elladki1/CMSE802/Final_Project/cmse802_project/src/eda.py</a></td></tr></table>
    <p><span class="code">Author:&nbsp;Rana&nbsp;Elladki<br>
Date:&nbsp;10/15/2025<br>
Description:&nbsp;Performs&nbsp;exploratory&nbsp;data&nbsp;analysis&nbsp;on&nbsp;molecular&nbsp;descriptor<br>
&nbsp;&nbsp;&nbsp;&nbsp;datasets.&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;includes&nbsp;routines&nbsp;for&nbsp;correlation-based&nbsp;feature&nbsp;selection,<br>
&nbsp;&nbsp;&nbsp;&nbsp;outlier&nbsp;filtering,&nbsp;and&nbsp;log&nbsp;transformation&nbsp;of&nbsp;skewed&nbsp;data&nbsp;distributions.&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;After&nbsp;completing&nbsp;EDA,&nbsp;it&nbsp;splits&nbsp;the&nbsp;data&nbsp;into&nbsp;training,&nbsp;validation,&nbsp;and&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;testing&nbsp;sets.</span></p>
<p>
<table class="section">
<tr class="decor pkg-content-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Modules</strong></td></tr>
    
<tr><td class="decor pkg-content-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><table><tr><td class="multicolumn"><a href="numpy.html">numpy</a><br>
<a href="os.html">os</a><br>
</td><td class="multicolumn"><a href="pandas.html">pandas</a><br>
<a href="matplotlib.pyplot.html">matplotlib.pyplot</a><br>
</td><td class="multicolumn"><a href="seaborn.html">seaborn</a><br>
</td><td class="multicolumn"></td></tr></table></td></tr></table><p>
<table class="section">
<tr class="decor functions-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Functions</strong></td></tr>
    
<tr><td class="decor functions-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt><a name="-filter_outliers"><strong>filter_outliers</strong></a>(df, outdir=None, q_min=0.001, q_max=0.999, draw=1)</dt><dd><span class="code">Filter&nbsp;outliers&nbsp;based&nbsp;on&nbsp;percentile&nbsp;thresholds&nbsp;for&nbsp;each&nbsp;feature.<br>
&nbsp;<br>
Parameters<br>
----------<br>
df&nbsp;:&nbsp;pandas.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;Input&nbsp;DataFrame&nbsp;containing&nbsp;molecular&nbsp;descriptors.<br>
outdir&nbsp;:&nbsp;str,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Output&nbsp;directory&nbsp;to&nbsp;save&nbsp;plots&nbsp;to.<br>
q_min&nbsp;:&nbsp;float,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Lower&nbsp;percentile&nbsp;threshold&nbsp;for&nbsp;filtering.&nbsp;Default&nbsp;is&nbsp;0.001.<br>
q_max&nbsp;:&nbsp;float,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Upper&nbsp;percentile&nbsp;threshold&nbsp;for&nbsp;filtering.&nbsp;Default&nbsp;is&nbsp;0.999.<br>
draw&nbsp;:&nbsp;int,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Whether&nbsp;to&nbsp;plot&nbsp;a&nbsp;heatmap&nbsp;of&nbsp;feature&nbsp;correlations.&nbsp;Default&nbsp;is&nbsp;1&nbsp;(yes).<br>
&nbsp;<br>
Returns<br>
-------<br>
pandas.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;filtered&nbsp;DataFrame&nbsp;with&nbsp;outliers&nbsp;removed.<br>
&nbsp;<br>
Notes<br>
-----<br>
-&nbsp;This&nbsp;function&nbsp;is&nbsp;inspired&nbsp;from&nbsp;Day13-inclass.<br>
-&nbsp;The&nbsp;function&nbsp;saves&nbsp;histograms&nbsp;of&nbsp;unfiltered&nbsp;and&nbsp;filtered&nbsp;data&nbsp;as:<br>
&nbsp;&nbsp;-&nbsp;`&lt;outdir&gt;/hist_unfiltered.png`<br>
&nbsp;&nbsp;-&nbsp;`&lt;outdir&gt;/hist_filtered.png`<br>
-&nbsp;Features&nbsp;dominated&nbsp;by&nbsp;zeros&nbsp;(e.g.,&nbsp;NumRotatableBonds)&nbsp;are&nbsp;preserved.<br>
&nbsp;<br>
Examples<br>
--------<br>
&gt;&gt;&gt;&nbsp;clean_df&nbsp;=&nbsp;<a href="#-filter_outliers">filter_outliers</a>(df,&nbsp;q_min=0.01,&nbsp;q_max=0.99)<br>
&gt;&gt;&gt;&nbsp;clean_df.describe()</span></dd></dl>
 <dl><dt><a name="-log_transform"><strong>log_transform</strong></a>(df, outdir=None, exclude=None, skew_thresh=1.0, draw=1)</dt><dd><span class="code">Apply&nbsp;log2&nbsp;transformation&nbsp;to&nbsp;columns&nbsp;with&nbsp;high&nbsp;positive&nbsp;skewness.<br>
&nbsp;<br>
Parameters<br>
----------<br>
df&nbsp;:&nbsp;pandas.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;Input&nbsp;DataFrame&nbsp;containing&nbsp;molecular&nbsp;descriptors.<br>
outdir&nbsp;:&nbsp;str,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Output&nbsp;directory&nbsp;to&nbsp;save&nbsp;plots&nbsp;to.<br>
exclude&nbsp;:&nbsp;list&nbsp;of&nbsp;str,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Columns&nbsp;to&nbsp;exclude&nbsp;from&nbsp;transformation.&nbsp;Default&nbsp;is&nbsp;None.<br>
skew_thresh&nbsp;:&nbsp;float,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Threshold&nbsp;above&nbsp;which&nbsp;skewed&nbsp;columns&nbsp;are&nbsp;log-transformed.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Default&nbsp;is&nbsp;1.0.<br>
draw&nbsp;:&nbsp;int,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Whether&nbsp;to&nbsp;plot&nbsp;a&nbsp;heatmap&nbsp;of&nbsp;feature&nbsp;correlations.&nbsp;Default&nbsp;is&nbsp;1&nbsp;(yes).<br>
&nbsp;<br>
Returns<br>
-------<br>
pandas.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;DataFrame&nbsp;with&nbsp;skewed&nbsp;columns&nbsp;log-transformed.<br>
&nbsp;<br>
Notes<br>
-----<br>
-&nbsp;The&nbsp;function&nbsp;only&nbsp;applies&nbsp;the&nbsp;transformation&nbsp;to&nbsp;columns&nbsp;where<br>
&nbsp;&nbsp;all&nbsp;values&nbsp;are&nbsp;positive.<br>
-&nbsp;A&nbsp;histogram&nbsp;of&nbsp;the&nbsp;transformed&nbsp;data&nbsp;is&nbsp;saved&nbsp;as:<br>
&nbsp;&nbsp;`&lt;outdir&gt;/hist_logged.png`.<br>
&nbsp;<br>
Examples<br>
--------<br>
&gt;&gt;&gt;&nbsp;logged_df&nbsp;=&nbsp;<a href="#-log_transform">log_transform</a>(df,&nbsp;exclude=["RG2"])<br>
&gt;&gt;&gt;&nbsp;logged_df.head()</span></dd></dl>
 <dl><dt><a name="-pearson_correlation"><strong>pearson_correlation</strong></a>(df, outdir=None, target='RG2', top_count=20, draw=1)</dt><dd><span class="code">Perform&nbsp;Pearson&nbsp;correlation&nbsp;coefficient&nbsp;analysis&nbsp;to&nbsp;identify&nbsp;descriptors<br>
that&nbsp;have&nbsp;the&nbsp;strongest&nbsp;relationship&nbsp;with&nbsp;the&nbsp;target&nbsp;variable&nbsp;(e.g.,&nbsp;RG2).<br>
&nbsp;<br>
Parameters<br>
----------<br>
df&nbsp;:&nbsp;pandas.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;Input&nbsp;DataFrame&nbsp;containing&nbsp;molecular&nbsp;descriptors&nbsp;and&nbsp;the&nbsp;target&nbsp;variable.<br>
outdir&nbsp;:&nbsp;str,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Output&nbsp;directory&nbsp;to&nbsp;save&nbsp;plots&nbsp;to.<br>
target&nbsp;:&nbsp;str,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;of&nbsp;the&nbsp;target&nbsp;variable&nbsp;column.&nbsp;Default&nbsp;is&nbsp;'RG2'.<br>
top_count&nbsp;:&nbsp;int,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Number&nbsp;of&nbsp;top&nbsp;correlated&nbsp;features&nbsp;to&nbsp;select.&nbsp;Default&nbsp;is&nbsp;20.<br>
draw&nbsp;:&nbsp;int,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Whether&nbsp;to&nbsp;plot&nbsp;a&nbsp;heatmap&nbsp;of&nbsp;feature&nbsp;correlations.&nbsp;Default&nbsp;is&nbsp;1&nbsp;(yes).<br>
&nbsp;<br>
Returns<br>
-------<br>
pandas.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;reduced&nbsp;DataFrame&nbsp;containing&nbsp;the&nbsp;top&nbsp;correlated&nbsp;descriptors&nbsp;along<br>
&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;target&nbsp;variable.<br>
&nbsp;<br>
Notes<br>
-----<br>
-&nbsp;The&nbsp;function&nbsp;removes&nbsp;the&nbsp;'ID'&nbsp;column&nbsp;if&nbsp;present.<br>
-&nbsp;A&nbsp;correlation&nbsp;heatmap&nbsp;is&nbsp;saved&nbsp;to<br>
&nbsp;&nbsp;`&lt;outdir&gt;/corr_heatmap_top_&lt;top_count&gt;_feats.png`.<br>
&nbsp;<br>
Examples<br>
--------<br>
&gt;&gt;&gt;&nbsp;reduced_df&nbsp;=&nbsp;<a href="#-pearson_correlation">pearson_correlation</a>(df,&nbsp;target="RG2",&nbsp;top_count=10)<br>
&gt;&gt;&gt;&nbsp;reduced_df.head()</span></dd></dl>
 <dl><dt><a name="-split_data"><strong>split_data</strong></a>(df, rand_state=42)</dt><dd><span class="code">Split&nbsp;the&nbsp;dataset&nbsp;into&nbsp;training,&nbsp;validation,&nbsp;and&nbsp;test&nbsp;sets.<br>
&nbsp;<br>
Parameters<br>
----------<br>
df&nbsp;:&nbsp;pandas.DataFrame<br>
&nbsp;&nbsp;&nbsp;&nbsp;Full&nbsp;dataset&nbsp;including&nbsp;target&nbsp;column&nbsp;'RG2'.<br>
rand_state&nbsp;:&nbsp;int,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Random&nbsp;seed&nbsp;for&nbsp;reproducibility.&nbsp;Default&nbsp;is&nbsp;42.<br>
&nbsp;<br>
Returns<br>
-------<br>
tuple&nbsp;of&nbsp;pandas.Dataframe&nbsp;and&nbsp;pandas.Series<br>
&nbsp;&nbsp;&nbsp;&nbsp;Contains:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;X_train<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;X_val<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;X_test<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;y_train<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;y_val<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;y_test<br>
&nbsp;<br>
Examples<br>
--------<br>
&gt;&gt;&gt;&nbsp;splits&nbsp;=&nbsp;<a href="#-split_data">split_data</a>(desc_df,&nbsp;rand_state=123)<br>
&gt;&gt;&gt;&nbsp;len(splits)<br>
6</span></dd></dl>
</td></tr></table>
</body></html>